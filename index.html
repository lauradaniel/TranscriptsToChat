<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XO Projects Transcripts to AI Chat</title>
  <link href="font_google.css" rel="stylesheet">
  <script src="chart.js"></script>
  <link rel="stylesheet" href="styleUI.css">
  <link rel="stylesheet" href="table-scroll-styles.css">

</head>
<body>
  <div id="landingPage" class="landing-page">
    <div class="ngnx-app-shell__navigation-bar">
      <ul class="ngnx-navigation-menu-app__list ngnx-navigation-menu-app__list--collapsed">

        <li class="ngnx-navigation-menu-app__list-item" onclick="showView('home')">
            <span aria-label="Home" class="ngnx-navigation-menu-app__list-item-app">
                <span class="ngnx-navigation-menu-app__list-item-app-icon ngnx-icon">
                    <img src="assets/img/analytics-widgets.svg" alt="Home" class="nav-icon-size" />
                </span>
            </span>
        </li>

        <li class="ngnx-navigation-menu-app__list-item" onclick="showView('chat')">
            <span aria-label="Chat" class="ngnx-navigation-menu-app__list-item-app">
                <span class="ngnx-navigation-menu-app__list-item-app-icon ngnx-icon">
                    <img src="assets/img/bot-builder.svg" alt="Chat" class="nav-icon-size" />
                </span>
            </span>
        </li>

        <li class="ngnx-navigation-menu-app__list-item" onclick="showView('admin')">
            <span aria-label="Project Administration" class="ngnx-navigation-menu-app__list-item-app">
                <span class="ngnx-navigation-menu-app__list-item-app-icon ngnx-icon">
                    <img src="assets/img/admin.svg" alt="Admin" class="nav-icon-size" />
                </span>
            </span>
        </li>

      </ul>
      </div>
    
    <div class="landing-content">
      
      <div class="ngnx-xo-project-header">
        <h3 class="ngnx-xo-project-header__title">XO Projects Transcripts to AI Chat</h3>
        
        <div id="chatProjectSelectorContainer" class="chat-project-selector-container" style="display: none;">
          <div class="ngnx-input-text-container">
            <input type="text" id="chatProjectSearch" placeholder="Select Project" readonly aria-expanded="false" style="border:none;  width: 100%; height: 100%;"/>
            <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/>
          </div>
          <ul id="chatProjectDropdown" class="chat-project-dropdown-list hidden">
            </ul>
        </div>
        
        <div id="createProjectButtonContainer" class="ngnx-xo-header__title-button">
          <button class="ngnx-button ngnx-button--medium ngnx-button--primary" onclick="openCreateProject()">
            <span class="ngnx-button__content">
              <span class="ngnx-button__label ngnx-button__content-item">Create Project</span>
            </span>
          </button>
        </div>

        <div id="filterProjectButtonContainer" class="ngnx-xo-header__title-button" style="display: none;">
          <button class="ngnx-button ngnx-button--medium ngnx-button--secondary" onclick="openFilterPanel()" aria-label="Filter">
            <span class="ngnx-button__content">
              <span class="ngnx-button__icon ngnx-icon">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32" width="20" height="20" aria-hidden="true" focusable="false">
                  <path d="M28 6h-24c-1.104 0-2 0.896-2 2s0.896 2 2 2h24c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
                  <path d="M22 14h-12c-1.104 0-2 0.896-2 2s0.896 2 2 2h12c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
                  <path d="M16 22h-6c-1.104 0-2 0.896-2 2s0.896 2 2 2h6c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
                </svg>
              </span>
            </span>
          </button>
        </div>
      </div>                
      <div class="landing-main">
        <div id="resultsPanel" class="ngnx-xo-results__panel ngnx-main-panel">
          <div class="ngnx-main-panel__header">
            <div class="ngnx-main-panel__header-title">Projects Overview</div>
          </div>
          <div class="ngnx-main-panel__body">
            </div>
          </div>
      </div>
    </div>
  </div>
  
  <section id="createProjectPanel" class="ngnx-xo-create-project-container hidden" aria-hidden="true">
    <nx-side-panel class="ngnx-side-panel ngnx-side-panel--position-right ngnx-side-panel--overlay" role="dialog" aria-modal="true" aria-label="Create Project">
      <nx-side-panel-header class="ngnx-side-panel-header ngnx-side-panel-header--position-right ngnx-side-panel-header--size-large">
        <span class="ngnx-side-panel-header__icon ngnx-icon">
          <div></div>
        </span>
        <span class="ngnx-side-panel-header__text">Create Project</span>

        <button
          nxghostbutton
          class="ngnx-side-panel-header__close-button ngnx-ghost-button ngnx-ghost-button--medium ngnx-ghost-button--icon-only"
          aria-label="Close"
          onclick="closeCreateProject()"
          style="--ngnx-ghost-button-foreground-color: var(--ngnx-color-application-glue-630); --ngnx-ghost-button-selected-background-color: var(--ngnx-color-application-glue-5);">
          <span class="ngnx-ghost-button__icon ngnx-icon">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32" aria-hidden="true" focusable="false">
              <path d="M24 14.080l-13.6-13.6c-0.64-0.64-1.76-0.64-2.4 0s-0.64 1.76 0 2.4l12.8 12.8-12.8 13.6c-0.64 0.64-0.64 1.76 0 2.4s1.76 0.64 2.4 0l13.6-14.4c0.48-0.48 0.48-0.96 0.48-1.44 0-0.8-0.16-1.44-0.48-1.76z"/>
            </svg>
          </span>
        </button>
      </nx-side-panel-header>

      <nx-side-panel-body class="ngnx-side-panel-body ngnx-side-panel-body--header-present">
        <div class="ngnx-xo-create-project-container__side-panel-body-wrapper ngnx-xo-create-project-container__sidebar">
          <div class="ngnx-xo-create-project-container__sidebar-padding">
            
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-required">
              <label class="ngnx-form-field__label" aria-hidden="true">Project Name</label>
              <div class="ngnx-input-text-container ngnx-input-text-container--form-type ngnx-input-text-container--no-icons">
                <input name="projectName"
                       class="ngnx-input-text ngnx-xo-create-project-container__sidebar-project-name-input ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Enter project name"
                       maxlength="80" />
              </div>
              <div class="ngnx-form-field__message ngnx-form-field__message--hidden"></div>
            </nx-form-field>
      
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label" aria-hidden="true">Description</label>
              <textarea name="projectDescription"
                        class="ngnx-input-text ngnx-xo-create-project-container__sidebar-project-description-textarea ngnx-xo-input-text"
                        placeholder="Enter project description"
                        maxlength="260"></textarea>
              <div class="ngnx-form-field__message ngnx-form-field__message--hidden"></div>
            </nx-form-field>
            
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field ngnx-xo-create-project-container__sidebar-required">
              <label class="ngnx-form-field__label" aria-hidden="true">Upload CSV Data File</label>
              <nx-auto-complete class="ngnx-xo-create-project-container__sidebar-auto-complete" style="pointer-events:unset; opacity:1; cursor:auto;">
            
                <section>
                  <div class="ngnx-xo-create-project-container__sidebar-file-upload-container" style="pointer-events:unset; opacity:1;">
                    <input type="file" id="fileDropRef" accept=".csv" />
                    <img src="assets/img/ic-upload-file.svg" alt="" height="26" width="26" />
                    <h4 class="drag-file-label">Drag files here or <span>Browse</span></h4>
                    <label class="supported-file-label">Supported file type: CSV</label>
                  </div>
      
                  <div class="ngnx-xo-create-project-container__sidebar-files-list" style="margin-top:unset;"></div>
                </section>
              </nx-auto-complete>
              <div class="ngnx-form-field__message ngnx-form-field__message--hidden"></div>
            </nx-form-field>
            
          </div>
      
          <div class="ngnx-xo-create-project-container__sidebar-button-bar">
            <button class="ngnx-footer-button ngnx-button ngnx-button--medium ngnx-button--secondary" onclick="closeCreateProject()">
              <span class="ngnx-button__content">
                <span class="ngnx-button__label ngnx-button__content-item">Cancel</span>
              </span>
            </button>
            <button class="ngnx-footer-button ngnx-button ngnx-button--medium ngnx-button--primary">
              <span class="ngnx-button__content">
                <span class="ngnx-button__label ngnx-button__content-item">Save</span>
              </span>
            </button>
          </div>
        </div>
      </nx-side-panel-body>
      
    </nx-side-panel>
  </section>

  <!-- Filter Panel -->
  <section id="filterPanel" class="ngnx-xo-filter-project-container hidden" aria-hidden="true">
    <nx-side-panel class="ngnx-filter-side-panel ngnx-side-panel--position-right ngnx-side-panel--overlay" role="dialog" aria-modal="true" aria-label="Filter Options">
      <nx-side-panel-header class="ngnx-side-panel-header ngnx-side-panel-header--position-right ngnx-side-panel-header--size-large" style="display : none;">
        <span class="ngnx-side-panel-header__icon ngnx-icon">
          <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32" width="24" height="24" aria-hidden="true" focusable="false">
            <path d="M28 6h-24c-1.104 0-2 0.896-2 2s0.896 2 2 2h24c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
            <path d="M22 14h-12c-1.104 0-2 0.896-2 2s0.896 2 2 2h12c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
            <path d="M16 22h-6c-1.104 0-2 0.896-2 2s0.896 2 2 2h6c1.104 0 2-0.896 2-2s-0.896-2-2-2z"></path>
          </svg>
        </span>
        <span class="ngnx-side-panel-header__text">Filter Options</span>

        <button
          nxghostbutton
          class="ngnx-side-panel-header__close-button ngnx-ghost-button ngnx-ghost-button--medium ngnx-ghost-button--icon-only"
          aria-label="Close"
          onclick="closeFilterPanel()"
          style="--ngnx-ghost-button-foreground-color: var(--ngnx-color-application-glue-630); --ngnx-ghost-button-selected-background-color: var(--ngnx-color-application-glue-5);">
          <span class="ngnx-ghost-button__icon ngnx-icon">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32" aria-hidden="true" focusable="false">
              <path d="M24 14.080l-13.6-13.6c-0.64-0.64-1.76-0.64-2.4 0s-0.64 1.76 0 2.4l12.8 12.8-12.8 13.6c-0.64 0.64-0.64 1.76 0 2.4s1.76 0.64 2.4 0l13.6-14.4c0.48-0.48 0.48-0.96 0.48-1.44 0-0.8-0.16-1.44-0.48-1.76z"/>
            </svg>
          </span>
        </button>
      </nx-side-panel-header>

      <nx-side-panel-body class="ngnx-side-filter-panel-body ngnx-side-panel-body--header-present">
        <div class="ngnx-xo-create-project-container__side-panel-body-wrapper ngnx-xo-create-project-container__sidebar">
          <div class="ngnx-xo-create-project-container__sidebar-padding">

            <p style="color: var(--ngnx-color-application-glue-630); margin-bottom: 24px; font-weight: 600;">
              Filters
            </p>

            <!-- Column Visibility -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label">Table Columns</label>
              <div class="filter-multiselect-container">
                <input type="text"
                       id="columnVisibilitySearchInput"
                       class="ngnx-input-text ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Search columns..."
                       onkeyup="filterColumnVisibilityOptions()"
                       onfocus="showColumnVisibilityDropdown()" />
                <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/> 
                <div id="columnVisibilityDropdown" class="filter-dropdown hidden">
                  <div class="filter-dropdown-options" id="columnVisibilityOptions">
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
              </div>
            </nx-form-field>
            <!-- Category Multi-Select -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label">Category</label>
              <div class="filter-multiselect-container">
                <input type="text"
                       id="categorySearchInput"
                       class="ngnx-input-text ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Search categories..."
                       onkeyup="filterDropdownOptions('category')"
                       onfocus="showFilterDropdown('category')" />
                <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/>       
                <div id="categoryDropdown" class="filter-dropdown hidden">
                  <div class="filter-dropdown-options" id="categoryOptions">
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
                <div class="filter-selected-items" id="categorySelected"></div>
              </div>
            </nx-form-field>

            <!-- Topic Multi-Select -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label">Topic</label>
              <div class="filter-multiselect-container">
                <input type="text"
                       id="topicSearchInput"
                       class="ngnx-input-text ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Search topics..."
                       onkeyup="filterDropdownOptions('topic')"
                       onfocus="showFilterDropdown('topic')" />
                       <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/>         
                <div id="topicDropdown" class="filter-dropdown hidden">
                  <div class="filter-dropdown-options" id="topicOptions">
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
                <div class="filter-selected-items" id="topicSelected"></div>
              </div>
            </nx-form-field>

            <!-- Intent Multi-Select -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label">Intent</label>
              <div class="filter-multiselect-container">
                <input type="text"
                       id="intentSearchInput"
                       class="ngnx-input-text ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Search intents..."
                       onkeyup="filterDropdownOptions('intent')"
                       onfocus="showFilterDropdown('intent')" />
                       <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/>         
                <div id="intentDropdown" class="filter-dropdown hidden">
                  <div class="filter-dropdown-options" id="intentOptions">
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
                <div class="filter-selected-items" id="intentSelected"></div>
              </div>
            </nx-form-field>

            <!-- Agent Task Multi-Select -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">
              <label class="ngnx-form-field__label">Agent Task</label>
              <div class="filter-multiselect-container">
                <input type="text"
                       id="agentTaskSearchInput"
                       class="ngnx-input-text ngnx-xo-input-text ngnx-input-text--form-type ngnx-input-text--small-form-size"
                       placeholder="Search agent tasks..."
                       onkeyup="filterDropdownOptions('agentTask')"
                       onfocus="showFilterDropdown('agentTask')" />
                       <img id="chatDropdownArrow" src="assets/img/arrow-down.svg" alt="Dropdown Arrow" class="dropdown-arrow-icon"  style= "height: 15px; width: 15px";/>         
                <div id="agentTaskDropdown" class="filter-dropdown hidden">
                  <div class="filter-dropdown-options" id="agentTaskOptions">
                    <!-- Populated by JavaScript -->
                  </div>
                </div>
                <div class="filter-selected-items" id="agentTaskSelected"></div>
              </div>
            </nx-form-field>
            <!-- IsAutomatable Toggle -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field">

              <div class="filter-toggle-container">
                <span class="ngnx-form-field__label">Automatable Only</span>
                <label class="filter-toggle-switch">
                  <input type="checkbox" id="isAutomatableToggle" />
                  <span class="filter-toggle-slider"></span>
                </label>

              </div>
            </nx-form-field>
            <!-- Separator -->
            <div style="border-top: 1px solid var(--ngnx-color-application-glue-a-20); margin: 24px 0;"></div>

            <!-- Sentiment Score Slider -->
            <nx-form-field class="ngnx-xo-create-project-container__sidebar-form-field sentiment-slider-field">
              <label class="ngnx-form-field__label">Avg. Sentiment Score</label>
              <div class="sentiment-slider-container">
                <div class="sentiment-inputs">
                  <div class="sentiment-input-group">
                    <label for="minSentiment" class="sentiment-input-label">From</label>
                    <input type="number"
                           id="minSentiment"
                           class="sentiment-input-box ngnx-input-text ngnx-input-text--small-form-size"
                           step="0.01"
                           readonly />
                  </div>
                  <div class="sentiment-input-group">
                    <label for="maxSentiment" class="sentiment-input-label">To</label>
                    <input type="number"
                           id="maxSentiment"
                           class="sentiment-input-box ngnx-input-text ngnx-input-text--small-form-size"
                           step="0.01"
                           readonly />
                  </div>
                </div>
                <div class="sentiment-slider-wrapper">
                  <div class="sentiment-slider-track">
                    <div class="sentiment-slider-range" id="sentimentSliderRange"></div>
                  </div>
                  <input type="range"
                         id="sentimentSliderMin"
                         class="sentiment-slider-input"
                         min="1"
                         max="5"
                         step="0.01"
                         value="1" />
                  <input type="range"
                         id="sentimentSliderMax"
                         class="sentiment-slider-input"
                         min="1"
                         max="5"
                         step="0.01"
                         value="5" />
                  <div class="sentiment-slider-labels">
                    <span id="sentimentLabelMin">1.00</span>
                    <span id="sentimentLabelMid">3.00</span>
                    <span id="sentimentLabelMax">5.00</span>
                  </div>
                </div>
              </div>
            </nx-form-field>
            <!-- Separator -->
            <div style="border-top: 1px solid var(--ngnx-color-application-glue-a-20); margin: 24px 0;"></div>
          </div>

          <div class="ngnx-xo-create-project-container__sidebar-button-bar">
            <button class="ngnx-footer-button ngnx-button ngnx-button--medium ngnx-button--secondary" onclick="clearAllFilters()">
              <span class="ngnx-button__content">
                <span class="ngnx-button__label ngnx-button__content-item">Clear All</span>
              </span>
            </button>
            <button class="ngnx-footer-button ngnx-button ngnx-button--medium ngnx-button--secondary" onclick="closeFilterPanel()">
              <span class="ngnx-button__content">
                <span class="ngnx-button__label ngnx-button__content-item">Cancel</span>
              </span>
            </button>
            <button class="ngnx-footer-button ngnx-button ngnx-button--medium ngnx-button--primary" onclick="applyFilters()">
              <span class="ngnx-button__content">
                <span class="ngnx-button__label ngnx-button__content-item">Apply</span>
              </span>
            </button>
          </div>
        </div>
      </nx-side-panel-body>

    </nx-side-panel>
  </section>

  <!-- AI Chat Modal -->
  <section id="aiChatModal" class="ai-chat-modal hidden" aria-hidden="true">
    <div class="ai-chat-overlay" onclick="closeAIChat()"></div>
    <div class="ai-chat-container">
      <div class="ai-chat-header">
        <div class="ai-chat-header-info">
          <img src="assets/img/bot-builder.svg" alt="AI Chat" class="ai-chat-icon" />
          <div>
            <h3 class="ai-chat-title">AI Chat - Transcript Analysis</h3>
            <p class="ai-chat-subtitle" id="aiChatSubtitle">Loading context...</p>
          </div>
        </div>
        <button class="ai-chat-close-btn" onclick="closeAIChat()" aria-label="Close chat">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="ai-chat-messages" id="aiChatMessages">
        <!-- Messages will be added here dynamically -->
      </div>

      <div class="ai-chat-input-container">
        <textarea
          id="aiChatInput"
          class="ai-chat-input"
          placeholder="Ask a question about these transcripts..."
          rows="1"
        ></textarea>
        <button class="ai-chat-send-btn" id="aiChatSendBtn" onclick="sendChatMessage()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
    </div>
  </section>

  <script src="MainScript.js" defer></script>
</body>
</html>